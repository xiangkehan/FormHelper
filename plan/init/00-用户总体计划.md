# FormHelper 项目总体执行计划

## 项目概述

FormHelper 是一个桌面端表格识别应用，用于识别 PDF、图片、Word、Excel 文件中的表格内容，并将数据记录到 SQLite 数据库中。

## 当前完成情况

### 基础架构（第一阶段）- 已完成约 70%

| 功能 | 状态 | 说明 |
|------|------|------|
| Tauri + Vue 3 项目 | ✅ | 项目已初始化 |
| Naive UI 组件库 | ✅ | 已安装和配置 |
| i18n 多语言 | ✅ | zh-CN, en-US 已配置 |
| SQLite 数据库 | ✅ | persons, files, table_records 表 |
| 路由配置 | ✅ | 4个页面路由 |
| Pinia 状态管理 | ✅ | appStore 已配置 |
| 视图页面 | ✅ | Home, Persons, Files, Settings |

### 仍需完成

| 功能 | 状态 | 说明 |
|------|------|------|
| Tauri 命令 | ❌ | commands/ 为空 |
| OCR 集成 | ❌ | ocr/ 为空 |
| 前后端连接 | ❌ | 前端使用模拟数据 |

---

## 依赖关系分析

### 当前阶段

**Agent 1 和 Agent 2 的部分工作已完成，但需要补充完善。**

### 已满足的依赖

- [x] Node.js >= 18（已配置）
- [x] Rust 和 Cargo（已配置）
- [x] Tauri CLI（已配置）

### 待安装的依赖

- Tesseract OCR（用于 Agent 3）

---

## 执行阶段调整

由于基础架构已基本完成，执行计划调整如下：

### 阶段一（Agent 1 补充）

| Agent | 任务 | 说明 |
|-------|------|------|
| Agent 1 | 完善后端命令 | 将数据库操作暴露为 Tauri 命令 |

### 阶段二（Agent 2 补充）

| Agent | 任务 | 说明 |
|-------|------|------|
| Agent 2 | 前后端对接 | 将模拟数据替换为真实 API 调用 |

### 阶段三（Agent 3 并行）

| Agent | 任务 | 说明 |
|-------|------|------|
| Agent 3 | OCR 集成 | Tesseract, PDF, Word, Excel 解析 |
| Agent 4 | 表格识别与数据 | 表格检测、数据展示编辑 |

---

## 执行流程

```
[已完成] 基础架构（70%）
         │
[阶段一] Agent 1: 完善 Tauri 命令 ────────┐
         │                                │
[阶段二] Agent 2: 前后端对接 ─────────────┼─► [阶段三]
         │                                │     Agent 3: OCR 集成
         └────────────────────────────────┘     Agent 4: 表格识别
                                              │
[合并到 main] ◄──────────────────────────────┘
```

---

## 各 Agent 职责说明（调整后）

### Agent 1 - 完善后端命令（补充任务）

**已完成的：**
- SQLite 数据库模块（persons, files, table_records）

**需要补充的：**
- 在 `src-tauri/src/commands/` 实现 Tauri 命令
- 将数据库操作暴露给前端调用
- 实现 `get_persons`, `create_person`, `update_person`, `delete_person`
- 实现 `get_files`, `add_file`, `delete_file`

### Agent 2 - 前后端对接（补充任务）

**已完成的：**
- 4个视图页面（HomeView, PersonsView, FilesView, SettingsView）
- i18n 中英文配置
- 拖拽上传 UI

**需要补充的：**
- 使用 `invoke` 调用 Tauri 命令
- 将模拟数据替换为真实后端数据
- 实现文件选择对话框
- 完善文件预览功能

### Agent 3 - 后端 OCR 集成

- Tesseract OCR 集成（图片识别）
- PDF 解析（使用 Rust crate）
- Word 文档解析
- Excel 文件解析
- 表格结构检测算法

### Agent 4 - 表格识别与数据管理

- 表格区域检测与行列识别
- 数据提取和 SQLite 存储
- 数据展示和编辑界面
- 数据导出功能（Excel/CSV）
- 云服务 API 扩展接口

---

## Git 工作流程

1. 每个 Agent 在独立的 worktree 中工作
2. Agent 只能查看代码，不能直接提交
3. 用户或 vibe-kanban 负责合并到 main
4. 合并后才对其他 Agent 可见

---

## 下一步

请确认是否继续执行：

1. Agent 1 是否需要补充 Tauri 命令实现？
2. Agent 2 是否需要完善前后端对接？
3. 是否可以并行启动 Agent 3 和 Agent 4？
